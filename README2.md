


---

<p dir="rtl">


# MongoKafka - מערכת לגילוי הונאות בזמן אמת

## סקירה כללית

MongoKafka היא מערכת לגילוי הונאות בזמן אמת שמעבדת נתוני עסקאות באמצעות Apache Kafka ומאחסנת את התוצאות ב-MongoDB. המערכת מסמולצת עם נתוני עסקאות, מעבדת אותם כדי לזהות פעילויות הונאה, ומאחסנת עסקאות הונאה ועסקאות בעלות ערך גבוה ב-MongoDB. עסקאות רגילות נרשמות בקבצי CSV לניתוח נוסף. המערכת כולה מותאמת לשימוש עם Docker ו-Docker Compose לניהול והפעלה פשוטה.


</p>

---
<p dir="rtl">

## תכונות

- **גילוי הונאות בזמן אמת**: משתמשת ב-Kafka להזרים נתוני עסקאות ומבצעת עיבוד בזמן אמת כדי לזהות פעילויות הונאה.
- **שילוב עם Kafka**: משתמשת ב-Kafka להזרמת נתונים ועיבוד הודעות בקצב גבוה.
- **שילוב עם MongoDB**: עסקאות הונאה ועסקאות בעלות ערך גבוה מאוחסנות ב-MongoDB לניתוח עתידי.
- **רישום עסקאות ב-CSV**: עסקאות רגילות נרשמות בקובצי CSV.
- **סביבה מבוססת Docker**: כל המערכת מותאמת לשימוש עם Docker ו-Docker Compose לצורך התקנה וניהול פשוטים.
- **עיבוד זרם**: עיבוד בזמן אמת של עסקאות לצורך גילוי הונאות לפי לוגיקה עסקית מותאמת.

</p>

---




## מבנה הפרויקט

הפרויקט מאורגן כך:
```


MongoKafka/
│
├── producer/
│   └── simulator.py                # מייצר ושולח נתוני עסקאות אקראיים ל-Kafka.
│   └── Dockerfile                  # Dockerfile לשירות המפעיל את ה-simulator.
│
├── stream_processor/
│   └── stream_processor.py         # מעבד את נתוני העסקאות ומגלה הונאות.
│   └── Dockerfile                  # Dockerfile לשירות המעבד את הנתונים.
│
├── fraud_consumer/
│   └── fraud_consumer.py           # צורך את עסקאות ההונאה ומאחסן אותן ב-MongoDB.
│   └── Dockerfile                  # Dockerfile לשירות הצורך את עסקאות ההונאה.
│
├── high_value_consumer/
│   └── high_value_consumer.py      # צורך את עסקאות הערך הגבוה ומאחסן אותן ב-MongoDB.
│   └── Dockerfile                  # Dockerfile לשירות הצורך את עסקאות הערך הגבוה.
│
├── transaction_logger/
│   └── transaction_logger.py       # רושם עסקאות רגילות בקבצי CSV.
│   └── Dockerfile                  # Dockerfile לשירות הרושם את העסקאות.
│
├── mongo/
│   └── init.js                     # סקריפט אתחול של MongoDB (למשל, יצירת אוספים).
│
├── docker-compose.yml              # קובץ Docker Compose לניהול כל השירותים במערכת.
├── requirements.txt                # רשימת תלותים (חבילות פייתון) לפרויקט.
└── README.md                       # תיעוד הפרויקט (קובץ זה).
```

---

<p dir="rtl">


## איך להריץ

כדי להרים את המערכת, בצע את השלבים הבאים:

### 1. בניית הקונטיינרים של Docker

וודא שיש לך את Docker ו-Docker Compose מותקנים במחשב שלך. לאחר מכן, בתיקיית הפרויקט הראשית, הרץ:

</p>

```bash
docker-compose build
```

הפקודה הזו תבנה את כל התמונות הנדרשות לכל השירותים בפרויקט.

### 2. הרצת הקונטיינרים

כדי להרים את השירותים (Kafka, MongoDB וכל השירותים המותאמים אישית), הרץ:

```bash
docker-compose up
```

הפקודה הזו תתחיל את השירותים הבאים:

- **Kafka**: Broker של Kafka להזרמת הודעות.
- **MongoDB**: MongoDB לאחסון עסקאות הונאה ועסקאות בעלות ערך גבוה.
- **Simulator**: שירות שמסמולץ נתוני עסקאות אקראיים ושולח אותם ל-Kafka.
- **Stream Processor**: מעבד את זרם הנתונים ומגלה הונאות.
- **Fraud Consumer**: צורך את עסקאות ההונאה מ-Kafka ומאחסן אותן ב-MongoDB.
- **High-Value Consumer**: צורך את עסקאות הערך הגבוה ומאחסן אותן ב-MongoDB.
- **Transaction Logger**: רושם עסקאות רגילות לקבצי CSV.

### 3. בדיקת המערכת

לאחר שהמערכת פועלת, אתה יכול לבדוק את הדברים הבאים:

- **עסקאות הונאה**: בדוק ב-MongoDB את האוסף `fraudulent_transactions`.
- **עסקאות בעלות ערך גבוה**: בדוק ב-MongoDB את האוסף `high_value_transactions`.
- **עסקאות רגילות**: חפש בקובץ `transactions.csv` את העסקאות הרגילות.

בנוסף, ניתן לבדוק את הלוגים של כל שירות באמצעות הפקודה הבאה:

```bash
docker-compose logs <service_name>
```

למשל, כדי לראות את הלוגים של ה-`fraud_consumer`, הרץ:

```bash
docker-compose logs fraud_consumer
```

---

## תלותים בפרויקט

להלן התלויות הדרושות לפרויקט. ניתן להתקין אותן על ידי הרצת:

```bash
pip install -r requirements.txt
```

הקובץ `requirements.txt` כולל את התלויות הבאות:

```
kafka-python==2.0.0
pymongo==3.12.0
pandas==1.3.3
```

---

## שירותי Docker Compose

- **Kafka**: Kafka משמש להזרמת נתונים ולעיבוד הודעות בקצב גבוה.
- **MongoDB**: MongoDB מאחסן את העסקאות המפוקפקות ועסקאות הערך הגבוה לצורך ניתוח.
- **Simulator**: שירות המייצר נתוני עסקאות אקראיים ושולח אותם ל-Kafka.
- **Stream Processor**: מעבד את נתוני העסקאות מ-Kafka ומגלה פעילויות הונאה.
- **Fraud Consumer**: צורך את עסקאות ההונאה ומאחסן אותן ב-MongoDB.
- **High-Value Consumer**: צורך את עסקאות הערך הגבוה ומאחסן אותן ב-MongoDB.
- **Transaction Logger**: רושם עסקאות רגילות לקבצי CSV.

---

## פתרון תקלות

### בעיה: שירות Kafka לא עולה

וודא ש-Kafka מוגדר כראוי ובדוק את הלוגים עבור כל שגיאה. ניתן לראות את הלוגים של Kafka עם הפקודה:

```bash
docker-compose logs kafka
```

### בעיה: בעיות חיבור ל-MongoDB

אם MongoDB לא עולה, ניתן לבדוק את הלוגים של MongoDB:

```bash
docker-compose logs mongo
```

כמו כן, בדוק ש-MongoDB נגיש משירותים אחרים על ידי שימוש ב-URI `mongodb://mongo:27017` בקוד שלך.

---

## סיכום

MongoKafka מספקת פתרון שלם לגילוי הונאות בזמן אמת באמצעות Kafka להזרמת נתונים ו-MongoDB לאחסון. בעזרת Docker ו-Docker Compose, ניתן לנהל ולהריץ את המערכת בקלות. פרויקט זה מציג כיצד ניתן להשתמש בעיבוד זרם, טיפול בנתונים בזמן אמת ו-containerization לבניית מערכות יציבות ומוכנות לייצור.

---

**אתה מוזמן לשנות ולהתאים את הפרויקט לצרכיך!** אם יש לך שאלות או בעיות, פתח בעיה או צור קשר עם המפתח.

![Fraud Detection System](images/README_image.png)

---